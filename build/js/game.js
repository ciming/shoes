!function(){var s=function(s,i){var t=new Image;t.src=s};for(i=1;i<7;i++)s("img/"+i+"-a.png"),s("img/"+i+"-b.png");for(i=1;i<7;i++)s("img/s-u-"+i+".png")}(),$(function(){function s(s){$("#mask").show(),$("#mask").find(".sheosPic").html("<img src='img/"+s+".png'/>"),$("#mask").find(".sucessBox").addClass("animated bounceIn"),$("#mask").find(".bg").addClass("animated fadeIn"),m.level<=2?($("#mask").find(".rough").show(),$("#mask").find(".complete").hide()):($("#mask").find(".rough").hide(),$("#mask").find(".complete").show()),$("#mask").find("h2").addClass("animated fadeInDown"),$("#mask").find("p").addClass("animated fadeInDown"),$("#mask").find(".next").addClass("animated fadeInDown"),$("#mask").find(".sheosPic").addClass("animated zoomIn")}function i(s){$("#mask").hide(),$("#mask").find(".sucessBox").removeClass("animated zoomIn")}var t=window.innerWidth>0?window.innerWidth:screen.width,e=window.innerHeight>0?window.innerHeight:screen.height,n=function(){this.shoesUpArry={},this.shoesDownArry=[],this.level=0};n.prototype={next:function(s){$("#game").html(""),this.level<3?(this.level++,this.render()):$("#scene").animate({opacity:0,translate3d:"0,-100%,0"},600,"ease-out")},render:function(){var s=$("#level"+this.level);$("#scene>div").removeClass("active"),s.addClass("active"),s.find("div").addClass("animated fadeInDown"),this.putUpSheos(),this.putDownSheos(),this.touch()},addDownSheos:function(s){this.shoesDownArry=s},addUpSheos:function(s,i){this.shoesUpArry[s]=i},putDownSheos:function(){$.each(this.shoesDownArry,function(s,i){var n=t/2+(2*s-1)*(i.radius+i.radius/4)-i.radius;i.putShoes(n,.7185*e)})},putUpSheos:function(){$.each(this.shoesUpArry[this.level],function(s,i){var n=t/8*(2*s+1)-i.radius;i.putShoes(n,.446*e)})},touch:function(){var s=this;$.each(this.shoesUpArry[this.level],function(i,t){touch.on(t.el,"swiping",function(s){t.mX;t.mX=t._x+s.position.x-t.radius,t.mY=t._y+s.position.y-t.radius,t.updataLoaction()}),touch.on(t.el,"swipeend",function(i){s.check(t),t.back()})})},check:function(i){var t=i.mX,e=i.mY,n=this.shoesDownArry[0],a=this.shoesDownArry[1];t>n._x-n.radius&&t<n._x+n.radius&&e>n._y-n.radius&&e<n._y+n.radius?this.isRgiht(i)?s(i.sheosID+"-"+n.sheosID):n.wrong():t>a._x-a.radius&&t<a._x+a.radius&&e>a._y-a.radius&&e<a._y+a.radius&&(this.isRgiht(i)?s(i.sheosID+"-"+a.sheosID):a.wrong())},isRgiht:function(s){return s.answer.indexOf(this.level)>=0}};var a=function(s){this.sheosID=s?s:0,this._x=0,this._y=0,this.image="",this.radius=0,this.el=$('<div class="shoes"></div>')};a.prototype={putShoes:function(s,i){this.el.css("background-image","url(img/"+this.image+".png)"),this._x=s+this.radius,this._y=i+this.radius,this.el.width(2*this.radius).height(2*this.radius),this.el.css("top",i),this.el.css("left",s),$("#game").append(this.el)}};var o=function(s,i){a.call(this,s),this.mX=0,this.mY=0,this.image="s-u-"+s,this.answer=i?i:[],this.radius=.13*e/2};o.prototype=new a,o.prototype.updataLoaction=function(){this.el.css("left",this.mX-this.radius),this.el.css("top",this.mY-this.radius)},o.prototype.back=function(){this.el.animate({top:this._y-this.radius,left:this._x-this.radius},300,"ease-out")};var h=function(s){a.call(this,s),this.image="s-d-"+s,this.radius=.154*e/2};h.prototype=new a,h.prototype.wrong=function(){var s=this;this.el.addClass("shake"),setTimeout(function(){s.el.removeClass("shake")},1e3)};var d=new o(1,[1]),r=new o(2,[3]),u=new o(3,[1]),c=new o(4,[2]),l=(new o(5,[]),new o(6,[3])),m=new n;m.addDownSheos([new h("a"),new h("b")]),m.addUpSheos(1,[d,r,c,u]),m.addUpSheos(2,[d,c,u,l]),m.addUpSheos(3,[d,r,c,u]),$(function(){m.next()}),touch.on(".nextBtn","tap hold doubletap",function(s){i(),m.next()})});